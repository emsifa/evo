<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Request | Laravel Evo</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://emsifa.github.io/evo/evo/docs/request/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Request | Laravel Evo"><meta data-react-helmet="true" name="description" content="In Evo, you can access request value by attaching request attributes such as Query, Cookie, Header, Param, Body, etc to your method parameters. Then Evo will automatically inject corresponding value to attached parameter. Evo will also automatically validate and cast the value according to parameter type and definition."><meta data-react-helmet="true" property="og:description" content="In Evo, you can access request value by attaching request attributes such as Query, Cookie, Header, Param, Body, etc to your method parameters. Then Evo will automatically inject corresponding value to attached parameter. Evo will also automatically validate and cast the value according to parameter type and definition."><link data-react-helmet="true" rel="shortcut icon" href="/evo/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://emsifa.github.io/evo/evo/docs/request/"><link data-react-helmet="true" rel="alternate" href="https://emsifa.github.io/evo/evo/docs/request/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://emsifa.github.io/evo/evo/docs/request/" hreflang="x-default"><link rel="stylesheet" href="/evo/assets/css/styles.5ea23b56.css">
<link rel="preload" href="/evo/assets/js/runtime~main.bb99a180.js" as="script">
<link rel="preload" href="/evo/assets/js/main.fb3e09f3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/evo/"><img src="/evo/img/logo-black.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/evo/img/logo-white.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/evo/docs/getting-started/intro/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/emsifa/evo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/routing/">Routing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/evo/docs/request/">Request</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/dto/">DTO</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/validation/">Validation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/response/">Response</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/swagger-ui/">Swagger UI</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/mocking-api/">Mocking API</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Request</h1></header><p>In Evo, you can access request value by attaching request attributes such as <code>Query</code>, <code>Cookie</code>, <code>Header</code>, <code>Param</code>, <code>Body</code>, etc to your method parameters. Then Evo will automatically inject corresponding value to attached parameter. Evo will also automatically validate and cast the value according to parameter type and definition.</p><p>Before using those attributes, make sure you have import their full class names.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Param;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Query;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Header;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Cookie;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Body;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="query-attribute"></a><code>Query</code> Attribute<a class="hash-link" href="#query-attribute" title="Direct link to heading">#</a></h2><p><code>Query</code> attribute is used to get a query value from HTTP request.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Get]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function index(#[Query] int $page)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">} </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In example above, Evo will:</p><ol><li>Getting <code>request()-&gt;query(&#x27;page&#x27;)</code> value.</li><li>Apply validation to the value to make sure it&#x27;s numeric.</li><li>Cast value to <code>int</code>.</li><li>Inject casted value to <code>$page</code> parameter.</li></ol><p>If you want to use different query and parameter name, you can set <code>$key</code> parameter to <code>Query</code> attribute like an example below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Get]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function index(#[Query(&#x27;p&#x27;)] int $page)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">} </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In example above Evo will get <code>p</code> query value and inject it to <code>$page</code> parameter.</p><p>If you want to make it optional, you can just give default value to the parameter. For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Get]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function index(#[Query(&#x27;q&#x27;)] int $page = 1)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">} </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or you can also make it nullable, for example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Get]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function index(#[Query(&#x27;q&#x27;)] ?int $page)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="param-attribute"></a><code>Param</code> Attribute<a class="hash-link" href="#param-attribute" title="Direct link to heading">#</a></h2><p><code>Param</code> attribute is used to get URI parameter value.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Get(&#x27;users/{id}&#x27;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function index(#[Param] int $id)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">} </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Like <code>Query</code> attribute before, Evo will do validation, type casting, and inject the value to the <code>$id</code> parameter. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="header-attribute"></a><code>Header</code> Attribute<a class="hash-link" href="#header-attribute" title="Direct link to heading">#</a></h2><p><code>Header</code> attribute is used to get a header value from HTTP request.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Get(&#x27;users/{id}&#x27;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function index(#[Header(&#x27;user-agent&#x27;)] string $userAgent)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">} </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In example above, Evo will get <code>user-agent</code> header value and inject it to the <code>$userAgent</code> parameter.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="cookie-attribute"></a><code>Cookie</code> Attribute<a class="hash-link" href="#cookie-attribute" title="Direct link to heading">#</a></h2><p><code>Cookie</code> attribute is used to get a cookie value from HTTP request.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Get(&#x27;users/{id}&#x27;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function index(#[Cookie] string $token)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">} </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In example above, Evo will get <code>token</code> cookie value and inject it to the <code>$token</code> parameter.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="body-attribute"></a><code>Body</code> Attribute<a class="hash-link" href="#body-attribute" title="Direct link to heading">#</a></h2><p><code>Body</code> attribute is used to get value from HTTP request body.
To use <code>Body</code> attribute you have to use <code>DTO</code> class as the type of your parameter.
You can create <code>DTO</code> class by using <code>evo:make-dto</code> command.</p><p>In this example, we will inject request body value as <code>RegisterDto</code> instance into <code>register</code> method.</p><p>First, we have to generate <code>RegisterDto</code> class with command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">php artisan evo:make-dto RegisterDto name:string email:string password:string password_confirmation:string</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then you will get <code>app/Dtos/RegisterDto.php</code> file with code like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Dto;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Dto;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class RegisterDto extends Dto</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $name;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $email;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $password;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $password_confirmation;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now you may want to add some extra validations to each properties. You can do that by attaching rules attribute like an example below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Dto;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Dto;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Rules;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class RegisterDto extends Dto</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\Required]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $name;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\Required]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\Email(message: &quot;Incorrect email format&quot;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\Unique(table: &#x27;users&#x27;, column: &#x27;email&#x27;, message: &quot;Email already used by someone&quot;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $email;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\Required]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\Min(6, message: &quot;Password must have at least 6 characters&quot;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $password;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\Required]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Rules\SameWith(&#x27;password&#x27;, message: &quot;Password confirmation doesn&#x27;t match with password&quot;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $password_confirmation;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Behind the scene, code above will do validation like Laravel code below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">$request-&gt;validate([</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;name&#x27; =&gt; &#x27;required&#x27;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;email&#x27; =&gt; &#x27;required|email|unique:users,email&#x27;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;password&#x27; =&gt; &#x27;required|min:6&#x27;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;password_confirmation&#x27; =&gt; &#x27;required|same:password&#x27;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">], [</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;email.email&#x27; =&gt; &quot;Incorrect email format&quot;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;email.unique&#x27; =&gt; &quot;Email already used by someone&quot;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;password.min&#x27; =&gt; &quot;Password must have at least 6 characters&quot;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &#x27;password_confirmation.same&#x27; =&gt; &quot;Password confirmation doesn&#x27;t match with password&quot;,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">]);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>After defining validation rules to properties, you can inject <code>RegisterDto</code> instance to your method like any other attributes before, but with <code>Body</code> attribute.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Post(&#x27;register&#x27;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">public function register(#[Body] RegisterDto $dto)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And there you go. Same like any other attributes. Evo will validate the values, resolving <code>RegisterDto</code> instance, and inject it to <code>$dto</code> parameter.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="uploaded-file"></a>Uploaded File<a class="hash-link" href="#uploaded-file" title="Direct link to heading">#</a></h2><p>You can get uploaded files in two ways below:</p><ol><li>Using DTO class and <code>Body</code> attribute.</li><li>Using <code>File</code> attribute.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1-getting-uploaded-file-using-dto-and-body-attribute"></a>1. Getting uploaded file using DTO and <code>Body</code> attribute<a class="hash-link" href="#1-getting-uploaded-file-using-dto-and-body-attribute" title="Direct link to heading">#</a></h3><p>To get uploaded file using DTO, you can just add a property with type <code>Illuminate\Http\UploadedFile</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Dto;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Dto;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Rules;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">use Illuminate\Http\UploadedFile;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class UpdateProfileDto extends Dto</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #[Rules\Required]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $name;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #[Rules\Mimes([&#x27;jpeg&#x27;, &#x27;png&#x27;])]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #[Rules\Image]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    public ?UploadedFile $avatar = null;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In example above Evo will inject <code>$avatar</code> property with <code>request()-&gt;file(&#x27;avatar&#x27;)</code> value.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="2-getting-uploaded-file-using-file-attribute"></a>2. Getting uploaded file using <code>File</code> attribute<a class="hash-link" href="#2-getting-uploaded-file-using-file-attribute" title="Direct link to heading">#</a></h3><p>If you want directly inject uploaded file instance to your controller method, you can use <code>File</code> attribute like an example below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">#[Post(&#x27;register&#x27;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">public function register(</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #[Body] RegisterDto $dto,</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[File(rules: &#x27;required|mimes:jpeg,png|image&#x27;)] UploadedFile $avatar,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="loggeduser-attribute"></a><code>LoggedUser</code> Attribute<a class="hash-link" href="#loggeduser-attribute" title="Direct link to heading">#</a></h2><p><code>LoggedUser</code> attribute is used to get current logged user instance from <code>request()-&gt;user()</code>.
You can use it like any other request attributes before, just make sure if its optional, you have to make it nullable and set default value to null.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">public function show(</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #[Param] int $id,</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[LoggedUser] ?User $user = null,</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="create-custom-request-attribute"></a>Create Custom Request Attribute<a class="hash-link" href="#create-custom-request-attribute" title="Direct link to heading">#</a></h2><p>You can create your own request getter attribute by creating a class implementing <code>Emsifa\Evo\Contracts\RequestGetter</code> interface.</p><p>For example we will create <code>JwtToken</code> attribute to retrieve JWT token from header or cookie.</p><p>First, create a file <code>app/Http/Attributes/JwtToken.php</code>.</p><p>Then you can use code below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Http\Attributes;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Attribute;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Contracts\RequestGetter;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Illuminate\Http\Request;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Illuminate\Support\Str;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use ReflectionParameter;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use ReflectionProperty;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">#[Attribute(Attribute::TARGET_PARAMETER)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class JwtToken implements RequestGetter</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public function getRequestValue(Request $request, ReflectionParameter | ReflectionProperty $reflection): mixed</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    {</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        $token_from_header = $request-&gt;header(&quot;authorization&quot;);</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        $token_from_cookie = $request-&gt;cookie(&quot;token&quot;);</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        return $token_from_header</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">            ? Str::after($token_from_header, &quot;Bearer &quot;)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">            : $token_from_cookie;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now you can use it like any other request attributes like following code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">public function doSomething(#[JwtToken] ?string $token = null)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In most case you may want to validate the value to make sure it is safe for Evo to type cast it and inject it to your parameter.
To do that, you can implement <code>Emsifa\Evo\Contracts\RequestValidator</code> like an example below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Http\Attributes;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Attribute;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Contracts\RequestGetter;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Contracts\RequestValidator;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Illuminate\Http\Request;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Illuminate\Support\Str;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">use Illuminate\Support\Facades\Validator;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use ReflectionParameter;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use ReflectionProperty;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">#[Attribute(Attribute::TARGET_PARAMETER)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">class JwtToken implements RequestGetter, RequestValidator</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public function getRequestValue(Request $request, ReflectionParameter | ReflectionProperty $reflection): mixed</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    {</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        $token_from_header = $request-&gt;header(&quot;authorization&quot;);</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        $token_from_cookie = $request-&gt;cookie(&quot;token&quot;);</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        return $token_from_header</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">            ? Str::after($token_from_header, &quot;Bearer &quot;)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">            : $token_from_cookie;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    public function validateRequest(Request $request, ReflectionProperty | ReflectionParameter $reflection)</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">        $data = [</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">            &quot;token&quot; =&gt; $this-&gt;getRequestValue($request, $reflection)</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">        ];</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">        $rules = [</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">            &quot;token&quot; =&gt; &quot;required|string&quot;,</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">        ];</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">        Validator::make($data, $rules)-&gt;validate();</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    }</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now Evo will run <code>validateRequest</code> before type casting it&#x27;s value and inject it to your parameter.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/emsifa/evo/edit/main/website/docs/request.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/evo/docs/routing/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Routing</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/evo/docs/dto/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DTO Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#query-attribute" class="table-of-contents__link"><code>Query</code> Attribute</a></li><li><a href="#param-attribute" class="table-of-contents__link"><code>Param</code> Attribute</a></li><li><a href="#header-attribute" class="table-of-contents__link"><code>Header</code> Attribute</a></li><li><a href="#cookie-attribute" class="table-of-contents__link"><code>Cookie</code> Attribute</a></li><li><a href="#body-attribute" class="table-of-contents__link"><code>Body</code> Attribute</a></li><li><a href="#uploaded-file" class="table-of-contents__link">Uploaded File</a><ul><li><a href="#1-getting-uploaded-file-using-dto-and-body-attribute" class="table-of-contents__link">1. Getting uploaded file using DTO and <code>Body</code> attribute</a></li><li><a href="#2-getting-uploaded-file-using-file-attribute" class="table-of-contents__link">2. Getting uploaded file using <code>File</code> attribute</a></li></ul></li><li><a href="#loggeduser-attribute" class="table-of-contents__link"><code>LoggedUser</code> Attribute</a></li><li><a href="#create-custom-request-attribute" class="table-of-contents__link">Create Custom Request Attribute</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/evo/docs/getting-started/intro/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/evo/docs/getting-started/installation/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/laravel-evo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/laravel-evo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/emsifa/evo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Laravel Evo. Built with Docusaurus.</div></div></div></footer></div>
<script src="/evo/assets/js/runtime~main.bb99a180.js"></script>
<script src="/evo/assets/js/main.fb3e09f3.js"></script>
</body>
</html>