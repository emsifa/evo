<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Mocking API | Laravel Evo</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://emsifa.github.io/evo/evo/docs/mocking-api/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Mocking API | Laravel Evo"><meta data-react-helmet="true" name="description" content="Mocking API is a feature that allows your controller to send response with fake data."><meta data-react-helmet="true" property="og:description" content="Mocking API is a feature that allows your controller to send response with fake data."><link data-react-helmet="true" rel="shortcut icon" href="/evo/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://emsifa.github.io/evo/evo/docs/mocking-api/"><link data-react-helmet="true" rel="alternate" href="https://emsifa.github.io/evo/evo/docs/mocking-api/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://emsifa.github.io/evo/evo/docs/mocking-api/" hreflang="x-default"><link rel="stylesheet" href="/evo/assets/css/styles.5ea23b56.css">
<link rel="preload" href="/evo/assets/js/runtime~main.0ec65d52.js" as="script">
<link rel="preload" href="/evo/assets/js/main.fb3e09f3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/evo/"><img src="/evo/img/logo-black.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/evo/img/logo-white.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/evo/docs/getting-started/intro/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/emsifa/evo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/routing/">Routing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/request/">Request</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/dto/">DTO</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/validation/">Validation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/response/">Response</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/evo/docs/swagger-ui/">Swagger UI</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/evo/docs/mocking-api/">Mocking API</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mocking API</h1></header><p>Mocking API is a feature that allows your controller to send response with fake data.</p><p>When developing REST API with a team consisting of Back-end and Front-end Developers. Creating an API implementation could takes time. Sometimes it makes Front-end developer have to wait Back-end Developer to finish the implementation. This will make development time less efficient.</p><p>To make development time more efficient. We can use Mocking API so Front-end Developer can consume our API without waiting for real implementation to be done.</p><p>To do that, in Evo you can simply attach <code>Emsifa\Evo\Http\Response\Mock</code> attribute to your controller method. So when user call that endpoint, Evo will prevent its controller to be executed, instead Evo will read its return type, create return type instance and fill its properties with fake data, finally Evo will respond that fake instance.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="using-mock-attribute"></a>Using <code>Mock</code> Attribute<a class="hash-link" href="#using-mock-attribute" title="Direct link to heading">#</a></h2><p>For example, we will use <code>ExampleController</code> in <a href="/evo/docs/swagger-ui/#setup-swagger-ui">Swagger UI</a> section before.</p><p>To respond mock on <code>postSomething</code> method, we need to attach <code>Emsifa\Evo\Http\Response\Mock</code> like an example below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Http\Controllers;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Illuminate\Http\Request;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Route\Post;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Route\RoutePrefix;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Response\Mock;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use App\Dtos\PostSomethingDto;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use App\Http\Responses\PostSomethingResponse;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">#[RoutePrefix(&#x27;examples&#x27;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class ExampleController extends Controller</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #[Post(&#x27;post-something&#x27;)]</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[Mock]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public function postSomething(</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        #[Body] PostSomethingDto $dto</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    ): PostSomethingResponse</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    {</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        return PostSomethingResponse::fromArray($dto);</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>That&#x27;s it!</p><p>To try this, open your Swagger UI page. Expand <code>POST /api/examples/post-something</code> endpoint, click <code>Try it out</code>, then click execute.</p><p>You should see it responded with random data.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="using-specific-faker"></a>Using Specific Faker<a class="hash-link" href="#using-specific-faker" title="Direct link to heading">#</a></h2><p>Behind the scene Evo uses Faker to generate mock data. By default Evo choosing faker to be used is by looking the data type and the name of each property.</p><p>For example, if you have <code>$name</code> property, Evo will use <code>$faker-&gt;name()</code>. For <code>$title</code> property, Evo will use <code>$faker-&gt;title()</code>. For <code>float $latitude</code>, Evo will use <code>$faker-&gt;latitude()</code>. If the property name doesn&#x27;t have related faker formatter available, Evo will choose faker formatter by it&#x27;s data type.</p><p>If you want to use another faker instead of default choosed faker. You can use <code>Emsifa\Evo\Dtos\UseFaker</code> to define what formatter you want to use.</p><p>For example, we will use <code>paragraphs(5, true)</code> formatter to <code>$message</code> property.</p><p>Here is the code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Http\Responses;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Dtos\UseFaker;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Response\JsonResponse;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">#[Description(&quot;Post something succeed&quot;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class PostSomethingResponse extends JsonResponse</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public int $number;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[UseFaker(&quot;paragraph&quot;, 5, true)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $message;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now when you execute your endpoint again, it will respond <code>message</code> with paragraph contains 5 sentences.</p><blockquote><p>For complete formatter available, see <a href="https://fakerphp.github.io/" target="_blank" rel="noopener noreferrer">Faker Documentation</a>.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="create-custom-faker"></a>Create Custom Faker<a class="hash-link" href="#create-custom-faker" title="Direct link to heading">#</a></h2><p>You can also create your own faker generator by creating a class that implement <code>Emsifa\Evo\Contracts\ValueFaker</code> interface. Then, write your generator logic in <code>generateFakeValue</code> method. After that, you can just put its class name in <code>UseFaker</code> attribute before.</p><p>For example, we will create <code>CategoryFaker</code> that receive <code>string $type</code>, if <code>$type</code> is framework, it will return value either &quot;Laravel&quot;, &quot;Express.js&quot;, or &quot;Next.js&quot;. Else, it will return either &quot;Dessert&quot;, &quot;Appetizer&quot;, or &quot;Cocktail&quot;.</p><p>Create <code>app/Fakers/CategoryFaker.php</code> file with following code below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Fakers;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Contracts\ValueFaker;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Faker\Generator;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use ReflectionProperty;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class CategoryFaker implements ValueFaker</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public function __construct(protected string $type)</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    {</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public function generateFakeValue(Generator $faker, ReflectionProperty $property): mixed</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    {</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        if ($this-&gt;type == &quot;framework&quot;) {</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">            return $faker-&gt;randomElement([&quot;Laravel&quot;, &quot;Express.js&quot;, &quot;Nest.js&quot;]);</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">            return $faker-&gt;randomElement([&quot;Dessert&quot;, &quot;Appetizer&quot;, &quot;Cocktail&quot;]);</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">        }</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To use this, we can simply put <code>&quot;App\Fakers\CategoryFaker&quot;</code> in <code>UseFaker</code> attribute like following code below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><pre tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#ffffff"><span class="token plain">&lt;?php</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">namespace App\Http\Responses;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Dtos\UseFaker;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">use Emsifa\Evo\Http\Response\JsonResponse;</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">use App\Fakers\CategoryFaker;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">#[Description(&quot;Post something succeed&quot;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">class PostSomethingResponse extends JsonResponse</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public int $number;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[UseFaker(CategoryFaker::class)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $meal;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#ffffff"><span class="token plain">    #[UseFaker(CategoryFaker::class, &quot;framework&quot;)]</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">    public string $framework;</span></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/emsifa/evo/edit/main/website/docs/mocking-api.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/evo/docs/swagger-ui/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Swagger UI</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-mock-attribute" class="table-of-contents__link">Using <code>Mock</code> Attribute</a></li><li><a href="#using-specific-faker" class="table-of-contents__link">Using Specific Faker</a></li><li><a href="#create-custom-faker" class="table-of-contents__link">Create Custom Faker</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/evo/docs/getting-started/intro/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/evo/docs/getting-started/installation/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/laravel-evo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/laravel-evo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/emsifa/evo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Laravel Evo. Built with Docusaurus.</div></div></div></footer></div>
<script src="/evo/assets/js/runtime~main.0ec65d52.js"></script>
<script src="/evo/assets/js/main.fb3e09f3.js"></script>
</body>
</html>