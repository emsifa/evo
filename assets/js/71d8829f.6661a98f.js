"use strict";(self.webpackChunkevo=self.webpackChunkevo||[]).push([[660],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var o=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,i=function(e,n){if(null==e)return{};var t,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=o.createContext({}),l=function(e){var n=o.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=l(e.components);return o.createElement(p.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},c=o.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=l(t),d=i,g=c["".concat(p,".").concat(d)]||c[d]||m[d]||r;return t?o.createElement(g,a(a({ref:n},u),{},{components:t})):o.createElement(g,a({ref:n},u))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,a=new Array(r);a[0]=c;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var l=2;l<r;l++)a[l]=t[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}c.displayName="MDXCreateElement"},4167:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return u},default:function(){return c}});var o=t(7462),i=t(3366),r=(t(7294),t(3905)),a=["components"],s={sidebar_position:7},p="Swagger UI",l={unversionedId:"swagger-ui",id:"swagger-ui",isDocsHomePage:!1,title:"Swagger UI",description:"Swagger UI is a web based application to visualize and interacts with API's resources without having any of the implementation logic in place. It reads OpenAPI schema to display and interact with API endpoints.",source:"@site/docs/swagger-ui.md",sourceDirName:".",slug:"/swagger-ui",permalink:"/evo/docs/swagger-ui",editUrl:"https://github.com/emsifa/evo/edit/main/website/docs/swagger-ui.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Response",permalink:"/evo/docs/response"},next:{title:"Mocking API",permalink:"/evo/docs/mocking-api"}},u=[{value:"Setup Swagger UI",id:"setup-swagger-ui",children:[{value:"1. Publish Assets Files",id:"1-publish-assets-files",children:[]},{value:"2. Register Swagger Routes",id:"2-register-swagger-routes",children:[]},{value:"3. Add an Example Endpoint",id:"3-add-an-example-endpoint",children:[]}]},{value:"Configuring OpenAPI",id:"configuring-openapi",children:[{value:"<code>Example</code> Attribute",id:"example-attribute",children:[]},{value:"<code>Summary</code> Attribute",id:"summary-attribute",children:[]},{value:"<code>Description</code> Attribute",id:"description-attribute",children:[]}]},{value:"Create Custom OpenAPI Modifiers",id:"create-custom-openapi-modifiers",children:[]}],m={toc:u};function c(e){var n=e.components,t=(0,i.Z)(e,a);return(0,r.kt)("wrapper",(0,o.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"swagger-ui"},"Swagger UI"),(0,r.kt)("p",null,"Swagger UI is a web based application to visualize and interacts with API's resources without having any of the implementation logic in place. It reads OpenAPI schema to display and interact with API endpoints."),(0,r.kt)("p",null,"Evo generate OpenAPI schema ",(0,r.kt)("em",{parentName:"p"},"on-the-fly")," by reflecting your code, so you can display Swagger UI with minimal configuration."),(0,r.kt)("h2",{id:"setup-swagger-ui"},"Setup Swagger UI"),(0,r.kt)("p",null,"In this section we will guide you on how to setup Swagger UI with Evo."),(0,r.kt)("h3",{id:"1-publish-assets-files"},"1. Publish Assets Files"),(0,r.kt)("p",null,"First, you need to publish assets files that will be used by Swagger UI page."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"php artisan vendor:publish --tag=evo-assets\n")),(0,r.kt)("h3",{id:"2-register-swagger-routes"},"2. Register Swagger Routes"),(0,r.kt)("p",null,"Then, you have to register two routes. First route is to display Swagger UI and second route is to render OpenAPI specification as JSON."),(0,r.kt)("p",null,"To do that, you can simply add this line to your ",(0,r.kt)("inlineCode",{parentName:"p"},"routes/web.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"Evo::swagger('/docs');\n")),(0,r.kt)("p",null,"Now when you run ",(0,r.kt)("inlineCode",{parentName:"p"},"php artisan route:list"),", you should see ",(0,r.kt)("inlineCode",{parentName:"p"},"GET /docs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"GET /docs/openapi")," routes there."),(0,r.kt)("p",null,"You can check it by running your app with ",(0,r.kt)("inlineCode",{parentName:"p"},"php artisan serve"),", then in your browser, open URL ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:8000/docs"),"."),(0,r.kt)("p",null,"You should see Swagger UI page with no endpoints yet."),(0,r.kt)("h3",{id:"3-add-an-example-endpoint"},"3. Add an Example Endpoint"),(0,r.kt)("p",null,"Now we will create an example endpoint to be displayed in our Swagger UI."),(0,r.kt)("p",null,"First, let's create controller with following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"php artisan make:controller ExampleController\n")),(0,r.kt)("p",null,"Then, add this to your ",(0,r.kt)("inlineCode",{parentName:"p"},"routes/api.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"Evo::routes(ExampleController::class);\n")),(0,r.kt)("p",null,"Now, let's add a route in our ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleController"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:"{6,7,9,,12}","{6,7,9,,12}":!0},"<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse Emsifa\\Evo\\Route\\Post;\nuse Emsifa\\Evo\\Route\\RoutePrefix;\n\n#[RoutePrefix('examples')]\nclass ExampleController extends Controller\n{\n    #[Post('post-something')]\n    public function postSomething()\n    {\n\n    }\n}\n\n")),(0,r.kt)("p",null,"This time Evo will not render any endpoint to Swagger UI because Evo will only register endpoints that returns ",(0,r.kt)("inlineCode",{parentName:"p"},"Emsifa\\Evo\\Http\\Response\\JsonResponse")," instance."),(0,r.kt)("p",null,"Let's create DTO and JsonResponse class for our ",(0,r.kt)("inlineCode",{parentName:"p"},"postSomething")," method by running commands below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"php artisan evo:make-dto PostSomethingDto number:int message:string\nphp artisan evo:make-response PostSomethingResponse number:int message:string\n")),(0,r.kt)("p",null,"Now we are gonna use those generated files in ",(0,r.kt)("inlineCode",{parentName:"p"},"postSomething")," method like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:"{8,9,16,17,19}","{8,9,16,17,19}":!0},"<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse Emsifa\\Evo\\Route\\Post;\nuse Emsifa\\Evo\\Route\\RoutePrefix;\nuse App\\Dtos\\PostSomethingDto;\nuse App\\Http\\Responses\\PostSomethingResponse;\n\n#[RoutePrefix('examples')]\nclass ExampleController extends Controller\n{\n    #[Post('post-something')]\n    public function postSomething(\n        #[Body] PostSomethingDto $dto\n    ): PostSomethingResponse\n    {\n        return PostSomethingResponse::fromArray($dto);\n    }\n}\n")),(0,r.kt)("p",null,"Save it. Let's back to the browser, open ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:8000/docs"),", you will see there is ",(0,r.kt)("inlineCode",{parentName:"p"},"POST /api/examples/post-something")," operation/endpoint."),(0,r.kt)("h2",{id:"configuring-openapi"},"Configuring OpenAPI"),(0,r.kt)("p",null,"To configure OpenAPI schema, Evo provides some modifier attributes that will modify OpenAPI schema.\nAlso, Evo provide configuration file to modify some general informations in OpenAPI schema."),(0,r.kt)("p",null,"To configure info with configuration file. First you need to publish configuration file by running following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan vendor:publish --tag=evo-config\n")),(0,r.kt)("p",null,"It will create ",(0,r.kt)("inlineCode",{parentName:"p"},"config/evo.php")," in your project directory. Take a look, and modify it as you want."),(0,r.kt)("h3",{id:"example-attribute"},(0,r.kt)("inlineCode",{parentName:"h3"},"Example")," Attribute"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emsifa\\Evo\\Swagger\\OpenAPI\\Example")," attribute is used to define example value to response or DTO's property."),(0,r.kt)("p",null,"For example, if you expand our ",(0,r.kt)("inlineCode",{parentName:"p"},"POST /api/examples/post-something")," in Swagger UI, you will see our response example value like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "number": 0,\n    "message": "string"\n}\n')),(0,r.kt)("p",null,"If you want to modify it with more realistic example, we can modify ",(0,r.kt)("inlineCode",{parentName:"p"},"PostSomethingResponse")," into something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:"{6,10,13}","{6,10,13}":!0},'<?php\n\nnamespace App\\Http\\Responses;\n\nuse Emsifa\\Evo\\Http\\Response\\JsonResponse;\nuse Emsifa\\Evo\\Swagger\\OpenApi\\Example;\n\nclass PostSomethingResponse extends JsonResponse\n{\n    #[Example(12)]\n    public int $number;\n\n    #[Example("Lorem dolor sit amet")]\n    public string $message;\n}\n')),(0,r.kt)("p",null,"Now if you refresh Swagger UI page, you will see your defined example values there."),(0,r.kt)("h3",{id:"summary-attribute"},(0,r.kt)("inlineCode",{parentName:"h3"},"Summary")," Attribute"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emsifa\\Evo\\Swagger\\OpenApi\\Summary")," attribute is used to define summary to your endpoint operation."),(0,r.kt)("p",null,"You can attach it to your controller method like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:"{1,7}","{1,7}":!0},"use Emsifa\\Evo\\Swagger\\OpenApi\\Summary;\n\n#[RoutePrefix('examples')]\nclass ExampleController extends Controller\n{\n    #[Post('post-something')]\n    #[Summary('Post Something')]\n    public function postSomething(\n        #[Body] PostSomethingDto $dto\n    ): PostSomethingResponse\n    {\n        return PostSomethingResponse::fromArray($dto);\n    }\n}\n")),(0,r.kt)("p",null,'Now if you refresh Swagger UI, you will see "Post Something" in ',(0,r.kt)("inlineCode",{parentName:"p"},"POST /api/examples/post-something")," endpoint."),(0,r.kt)("h3",{id:"description-attribute"},(0,r.kt)("inlineCode",{parentName:"h3"},"Description")," Attribute"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emsifa\\Evo\\Swagger\\OpenApi\\Description")," attribute is used to define description for operation, schema (properties), response class, or DTO class."),(0,r.kt)("p",null,"For example we will add description to ",(0,r.kt)("inlineCode",{parentName:"p"},"PostSomethingResponse")," and its properties like following code below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:"{7,9,12,16}","{7,9,12,16}":!0},'<?php\n\nnamespace App\\Http\\Responses;\n\nuse Emsifa\\Evo\\Http\\Response\\JsonResponse;\nuse Emsifa\\Evo\\Swagger\\OpenApi\\Example;\nuse Emsifa\\Evo\\Swagger\\OpenApi\\Description;\n\n#[Description("Post something succeed")]\nclass PostSomethingResponse extends JsonResponse\n{\n    #[Description("A random number")]\n    #[Example(12)]\n    public int $number;\n\n    #[Description("A message to stored")]\n    #[Example("Lorem dolor sit amet")]\n    public string $message;\n}\n')),(0,r.kt)("p",null,"Now if you refresh Swagger UI, you will see those description shows there."),(0,r.kt)("h2",{id:"create-custom-openapi-modifiers"},"Create Custom OpenAPI Modifiers"),(0,r.kt)("p",null,"To create your own custom OpenAPI modifiers, Evo provides some interfaces that you can implement in your custom attribute class."),(0,r.kt)("p",null,"Those interfaces are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Emsifa\\Evo\\Contracts\\OpenApiPathModifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Emsifa\\Evo\\Contracts\\OpenApiSchemaModifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Emsifa\\Evo\\Contracts\\OpenApiResponseModifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Emsifa\\Evo\\Contracts\\OpenApiOperationModifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Emsifa\\Evo\\Contracts\\OpenApiParameterModifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Emsifa\\Evo\\Contracts\\OpenApiRequestBodyModifier"))),(0,r.kt)("p",null,"For example, you can take a look to ",(0,r.kt)("inlineCode",{parentName:"p"},"Description")," attribute:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"<?php\n\nnamespace Emsifa\\Evo\\Swagger\\OpenApi;\n\nuse Attribute;\nuse Emsifa\\Evo\\Contracts\\OpenApiOperationModifier;\nuse Emsifa\\Evo\\Contracts\\OpenApiParameterModifier;\nuse Emsifa\\Evo\\Contracts\\OpenApiRequestBodyModifier;\nuse Emsifa\\Evo\\Contracts\\OpenApiResponseModifier;\nuse Emsifa\\Evo\\Swagger\\OpenApi\\Schemas\\Operation;\nuse Emsifa\\Evo\\Swagger\\OpenApi\\Schemas\\Parameter;\nuse Emsifa\\Evo\\Swagger\\OpenApi\\Schemas\\RequestBody;\nuse Emsifa\\Evo\\Swagger\\OpenApi\\Schemas\\Response;\n\n#[Attribute]\nclass Description implements\n    OpenApiRequestBodyModifier,\n    OpenApiParameterModifier,\n    OpenApiOperationModifier,\n    OpenApiResponseModifier\n{\n    public function __construct(protected string $description)\n    {\n    }\n\n    public function modifyOpenApiRequestBody(RequestBody $body, mixed $reflection = null)\n    {\n        $body->description = $this->description;\n    }\n\n    public function modifyOpenApiParameter(Parameter $parameter)\n    {\n        $parameter->description = $this->description;\n    }\n\n    public function modifyOpenApiOperation(Operation $operation)\n    {\n        $operation->description = $this->description;\n    }\n\n    public function modifyOpenApiResponse(Response $response)\n    {\n        $response->description = $this->description;\n    }\n}\n")))}c.isMDXComponent=!0}}]);